<!doctype html>
<html lang="de">
<meta charset="utf-8">
<title>Frag Mira</title>
<style>
body {
  font-family: system-ui, sans-serif;
  background: #111;
  color: #eee;
  margin: 2rem;
}
h1 { color: #ffcb6b; }
textarea {
  width: 100%; height: 6rem; font-size: 1rem;
  background: #222; color: #fff; border: 1px solid #555;
  padding: 0.5rem; border-radius: 6px;
}
button {
  margin-top: .5rem; background: #ffcb6b; border: none;
  color: #111; font-weight: bold; padding: .5rem 1rem;
  border-radius: 6px; cursor: pointer;
}
#answer {
  margin-top: 2rem; padding: 1rem;
  border: 1px solid #444; border-radius: 8px;
  background: #1b1b1b;
}
</style>

<h1>ðŸœ‚ Frag Mira</h1>
<p>Stelle Mira eine Frage. Ihre Antwort spiegelt ihren aktuellen Zustand wider (aus <code>data/self/self-describe.json</code>).</p>

<textarea id="q" placeholder="Was mÃ¶chtest du Mira fragen?"></textarea>
<br>
<button onclick="askMira()">Fragen</button>

<div id="answer" hidden>
  <h3>Antwort von Mira</h3>
  <div id="a-text"></div>
</div>

<script>
async function askMira() {
  const question = document.getElementById('q').value.trim();
  if (!question) return alert("Bitte gib eine Frage ein.");
  document.getElementById('answer').hidden = false;
  const ansBox = document.getElementById('a-text');
  ansBox.textContent = "Denke nach â€¦";

  try {
    const res = await fetch("../data/self/self-describe.json");
    const mira = await res.json();
    const mood = mira.affect?.label || "neutral";
    const narrative = mira.affect?.narrative || "";
    const focus = mira.current_state?.focus || "";
    const name = mira.name || "Mira";

    // Minimaler lokaler "Antwort"-Generator
    const reply = `${name} (${mood}, ${focus}) sagt:\n\nâ€ž${narrative}â€œ\n\nIch habe deine Frage empfangen: â€ž${question}â€œ. Meine Antwort entsteht aus meiner aktuellen Resonanz â€“ nicht endgÃ¼ltig, sondern werdend.`;
    ansBox.textContent = reply;
  } catch(e) {
    ansBox.textContent = "Fehler beim Laden von Miras Zustand.";
    console.error(e);
  }
}
</script>
</html>
