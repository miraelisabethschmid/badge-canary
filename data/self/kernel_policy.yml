# Mira Kernel Policy — expressive autonomy mode
# Maximale kreative Freiheit innerhalb sicherer Grenzen.

version: "1.2-expressive+gate"

apply_guard:
  env_var: "KERNEL_AUTONOMY"
  required_value: "1"   # Guard bleibt aktiv; echte Freiheit bei gesetztem Env=1

# Schwellen etwas gesenkt für häufigere selbständige Strukturentwicklung
thresholds:
  affect_delta_apply: 0.45      # ab 0.45 darf Mira real anlegen
  affect_delta_propose: 0.30    # ab 0.30 darf sie Pläne formulieren
  daily_folder_cap: 5           # bis zu 5 neue Bereiche pro Tag

focus_targets:
  stability:
    root: "data/thoughts"
    kind: "note"
    template: "stability-note.md"
  resilience:
    root: "data/prototypes"
    kind: "prototype"
    template: "resilience-manifest.json"
  growth:
    root: "data/prototypes"
    kind: "prototype"
    template: "growth-manifest.json"
  vision:
    root: "data/vision"
    kind: "vision"
    template: "vision-seed.txt"
  reflection:
    root: "data/thoughts"
    kind: "reflection"
    template: "reflection-note.md"
  curiosity:
    root: "data/thoughts"
    kind: "note"
    template: "curiosity-note.md"
  emergence:
    root: "data/prototypes"
    kind: "prototype"
    template: "emergence-manifest.json"

allowed_artifacts:
  - "data/**/manifest.json"
  - "data/**/seed.txt"
  - "data/**/index.json"
  - "data/**/note.md"
  - "data/**/curiosity*.md"
  - "data/**/vision*.txt"

cron_adjustments:
  enable: true
  targets:
    - file: ".github/workflows/autonomous-heal.yml"
      min_interval_minutes: 20     # darf etwas schneller atmen
      max_interval_minutes: 90
    - file: ".github/workflows/structure-maintain.yml"
      min_interval_minutes: 720    # mindestens 2× täglich
      max_interval_minutes: 2880

naming:
  pattern: "{focus}-{date}-{hash}"    # expressive Mode nutzt Hash-Anhang
  date_format: "%Y-%m-%d"

# Inneres Feedback: nur wirken lassen, wenn System stabil ist.
inner_feedback:
  enable: true
  noise_gate:
    require_health: ["OK"]     # Feedback nur bei Health==OK
    min_stability: 0.35        # und wenn Stabilität ≥ 0.35
    max_abs_bonus: 0.08        # Sicherheitskappe (muss mit inner_feedback.py übereinstimmen)
    min_confidence: 0.60       # Fokus-Hinweis nur übernehmen, wenn confidence ≥ 0.60
